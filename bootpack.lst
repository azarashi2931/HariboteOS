     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_io_hlt
     7 00000000                                 	EXTERN	_io_load_eflags
     8 00000000                                 	EXTERN	_io_cli
     9 00000000                                 	EXTERN	_io_out8
    10 00000000                                 	EXTERN	_io_store_eflags
    11 00000000                                 [FILE "bootpack.c"]
    12 00000000                                 	GLOBAL	_Color8_000000
    13                                          [SECTION .data]
    14 00000000                                 _Color8_000000:
    15 00000000 00                              	DB	0
    16 00000001                                 	GLOBAL	_Color8_FF0000
    17 00000001                                 _Color8_FF0000:
    18 00000001 01                              	DB	1
    19 00000002                                 	GLOBAL	_Color8_00FF00
    20 00000002                                 _Color8_00FF00:
    21 00000002 02                              	DB	2
    22 00000003                                 	GLOBAL	_Color8_FFFF00
    23 00000003                                 _Color8_FFFF00:
    24 00000003 03                              	DB	3
    25 00000004                                 	GLOBAL	_Color8_0000FF
    26 00000004                                 _Color8_0000FF:
    27 00000004 04                              	DB	4
    28 00000005                                 	GLOBAL	_Color8_FF00FF
    29 00000005                                 _Color8_FF00FF:
    30 00000005 05                              	DB	5
    31 00000006                                 	GLOBAL	_Color8_00FFFF
    32 00000006                                 _Color8_00FFFF:
    33 00000006 06                              	DB	6
    34 00000007                                 	GLOBAL	_Color8_FFFFFF
    35 00000007                                 _Color8_FFFFFF:
    36 00000007 07                              	DB	7
    37 00000008                                 	GLOBAL	_Color8_C6C6C6
    38 00000008                                 _Color8_C6C6C6:
    39 00000008 08                              	DB	8
    40 00000009                                 	GLOBAL	_Color8_840000
    41 00000009                                 _Color8_840000:
    42 00000009 09                              	DB	9
    43 0000000A                                 	GLOBAL	_Color8_008400
    44 0000000A                                 _Color8_008400:
    45 0000000A 0A                              	DB	10
    46 0000000B                                 	GLOBAL	_Color8_848400
    47 0000000B                                 _Color8_848400:
    48 0000000B 0B                              	DB	11
    49 0000000C                                 	GLOBAL	_Color8_000084
    50 0000000C                                 _Color8_000084:
    51 0000000C 0C                              	DB	12
    52 0000000D                                 	GLOBAL	_Color8_840084
    53 0000000D                                 _Color8_840084:
    54 0000000D 0D                              	DB	13
    55 0000000E                                 	GLOBAL	_Color8_008484
    56 0000000E                                 _Color8_008484:
    57 0000000E 0E                              	DB	14
    58 0000000F                                 	GLOBAL	_Color8_848484
    59 0000000F                                 _Color8_848484:
    60 0000000F 0F                              	DB	15
    61                                          [SECTION .text]
    62 00000000                                 	GLOBAL	_HariMain
    63 00000000                                 _HariMain:
    64 00000000 55                              	PUSH	EBP
    65 00000001 89 E5                           	MOV	EBP,ESP
    66 00000003 E8 000001EF                     	CALL	_init_palette
    67 00000008 68 000000AB                     	PUSH	171
    68 0000000D 68 0000013F                     	PUSH	319
    69 00000012 6A 00                           	PUSH	0
    70 00000014 6A 00                           	PUSH	0
    71 00000016 6A 0E                           	PUSH	14
    72 00000018 68 00000140                     	PUSH	320
    73 0000001D 68 000A0000                     	PUSH	655360
    74 00000022 E8 0000026B                     	CALL	_boxfill8
    75 00000027 68 000000AC                     	PUSH	172
    76 0000002C 68 0000013F                     	PUSH	319
    77 00000031 68 000000AC                     	PUSH	172
    78 00000036 6A 00                           	PUSH	0
    79 00000038 6A 08                           	PUSH	8
    80 0000003A 68 00000140                     	PUSH	320
    81 0000003F 68 000A0000                     	PUSH	655360
    82 00000044 E8 00000249                     	CALL	_boxfill8
    83 00000049 83 C4 38                        	ADD	ESP,56
    84 0000004C 68 000000AD                     	PUSH	173
    85 00000051 68 0000013F                     	PUSH	319
    86 00000056 68 000000AD                     	PUSH	173
    87 0000005B 6A 00                           	PUSH	0
    88 0000005D 6A 07                           	PUSH	7
    89 0000005F 68 00000140                     	PUSH	320
    90 00000064 68 000A0000                     	PUSH	655360
    91 00000069 E8 00000224                     	CALL	_boxfill8
    92 0000006E 68 000000C7                     	PUSH	199
    93 00000073 68 0000013F                     	PUSH	319
    94 00000078 68 000000AE                     	PUSH	174
    95 0000007D 6A 00                           	PUSH	0
    96 0000007F 6A 08                           	PUSH	8
    97 00000081 68 00000140                     	PUSH	320
    98 00000086 68 000A0000                     	PUSH	655360
    99 0000008B E8 00000202                     	CALL	_boxfill8
   100 00000090 83 C4 38                        	ADD	ESP,56
   101 00000093 68 000000B0                     	PUSH	176
   102 00000098 6A 3B                           	PUSH	59
   103 0000009A 68 000000B0                     	PUSH	176
   104 0000009F 6A 03                           	PUSH	3
   105 000000A1 6A 07                           	PUSH	7
   106 000000A3 68 00000140                     	PUSH	320
   107 000000A8 68 000A0000                     	PUSH	655360
   108 000000AD E8 000001E0                     	CALL	_boxfill8
   109 000000B2 68 000000C4                     	PUSH	196
   110 000000B7 6A 02                           	PUSH	2
   111 000000B9 68 000000B0                     	PUSH	176
   112 000000BE 6A 02                           	PUSH	2
   113 000000C0 6A 07                           	PUSH	7
   114 000000C2 68 00000140                     	PUSH	320
   115 000000C7 68 000A0000                     	PUSH	655360
   116 000000CC E8 000001C1                     	CALL	_boxfill8
   117 000000D1 83 C4 38                        	ADD	ESP,56
   118 000000D4 68 000000C4                     	PUSH	196
   119 000000D9 6A 3B                           	PUSH	59
   120 000000DB 68 000000C4                     	PUSH	196
   121 000000E0 6A 03                           	PUSH	3
   122 000000E2 6A 0F                           	PUSH	15
   123 000000E4 68 00000140                     	PUSH	320
   124 000000E9 68 000A0000                     	PUSH	655360
   125 000000EE E8 0000019F                     	CALL	_boxfill8
   126 000000F3 68 000000C3                     	PUSH	195
   127 000000F8 6A 3B                           	PUSH	59
   128 000000FA 68 000000B1                     	PUSH	177
   129 000000FF 6A 3B                           	PUSH	59
   130 00000101 6A 0F                           	PUSH	15
   131 00000103 68 00000140                     	PUSH	320
   132 00000108 68 000A0000                     	PUSH	655360
   133 0000010D E8 00000180                     	CALL	_boxfill8
   134 00000112 83 C4 38                        	ADD	ESP,56
   135 00000115 68 000000C5                     	PUSH	197
   136 0000011A 6A 3B                           	PUSH	59
   137 0000011C 68 000000C5                     	PUSH	197
   138 00000121 6A 02                           	PUSH	2
   139 00000123 6A 00                           	PUSH	0
   140 00000125 68 00000140                     	PUSH	320
   141 0000012A 68 000A0000                     	PUSH	655360
   142 0000012F E8 0000015E                     	CALL	_boxfill8
   143 00000134 68 000000C5                     	PUSH	197
   144 00000139 6A 3C                           	PUSH	60
   145 0000013B 68 000000B0                     	PUSH	176
   146 00000140 6A 3C                           	PUSH	60
   147 00000142 6A 00                           	PUSH	0
   148 00000144 68 00000140                     	PUSH	320
   149 00000149 68 000A0000                     	PUSH	655360
   150 0000014E E8 0000013F                     	CALL	_boxfill8
   151 00000153 83 C4 38                        	ADD	ESP,56
   152 00000156 68 000000B0                     	PUSH	176
   153 0000015B 68 0000013C                     	PUSH	316
   154 00000160 68 000000B0                     	PUSH	176
   155 00000165 68 00000111                     	PUSH	273
   156 0000016A 6A 0F                           	PUSH	15
   157 0000016C 68 00000140                     	PUSH	320
   158 00000171 68 000A0000                     	PUSH	655360
   159 00000176 E8 00000117                     	CALL	_boxfill8
   160 0000017B 68 000000C4                     	PUSH	196
   161 00000180 68 00000111                     	PUSH	273
   162 00000185 68 000000B1                     	PUSH	177
   163 0000018A 68 00000111                     	PUSH	273
   164 0000018F 6A 0F                           	PUSH	15
   165 00000191 68 00000140                     	PUSH	320
   166 00000196 68 000A0000                     	PUSH	655360
   167 0000019B E8 000000F2                     	CALL	_boxfill8
   168 000001A0 83 C4 38                        	ADD	ESP,56
   169 000001A3 68 000000C5                     	PUSH	197
   170 000001A8 68 0000013C                     	PUSH	316
   171 000001AD 68 000000C5                     	PUSH	197
   172 000001B2 68 00000111                     	PUSH	273
   173 000001B7 6A 07                           	PUSH	7
   174 000001B9 68 00000140                     	PUSH	320
   175 000001BE 68 000A0000                     	PUSH	655360
   176 000001C3 E8 000000CA                     	CALL	_boxfill8
   177 000001C8 68 000000C5                     	PUSH	197
   178 000001CD 68 0000013D                     	PUSH	317
   179 000001D2 68 000000B0                     	PUSH	176
   180 000001D7 68 0000013D                     	PUSH	317
   181 000001DC 6A 07                           	PUSH	7
   182 000001DE 68 00000140                     	PUSH	320
   183 000001E3 68 000A0000                     	PUSH	655360
   184 000001E8 E8 000000A5                     	CALL	_boxfill8
   185 000001ED 83 C4 38                        	ADD	ESP,56
   186 000001F0                                 L2:
   187 000001F0 E8 [00000000]                   	CALL	_io_hlt
   188 000001F5 EB F9                           	JMP	L2
   189                                          [SECTION .data]
   190 00000010                                 _table_rgb.0:
   191 00000010 00                              	DB	0
   192 00000011 00                              	DB	0
   193 00000012 00                              	DB	0
   194 00000013 FF                              	DB	-1
   195 00000014 00                              	DB	0
   196 00000015 00                              	DB	0
   197 00000016 00                              	DB	0
   198 00000017 FF                              	DB	-1
   199 00000018 00                              	DB	0
   200 00000019 FF                              	DB	-1
   201 0000001A FF                              	DB	-1
   202 0000001B 00                              	DB	0
   203 0000001C 00                              	DB	0
   204 0000001D 00                              	DB	0
   205 0000001E FF                              	DB	-1
   206 0000001F FF                              	DB	-1
   207 00000020 00                              	DB	0
   208 00000021 FF                              	DB	-1
   209 00000022 00                              	DB	0
   210 00000023 FF                              	DB	-1
   211 00000024 FF                              	DB	-1
   212 00000025 FF                              	DB	-1
   213 00000026 FF                              	DB	-1
   214 00000027 FF                              	DB	-1
   215 00000028 C6                              	DB	-58
   216 00000029 C6                              	DB	-58
   217 0000002A C6                              	DB	-58
   218 0000002B 84                              	DB	-124
   219 0000002C 00                              	DB	0
   220 0000002D 00                              	DB	0
   221 0000002E 00                              	DB	0
   222 0000002F 84                              	DB	-124
   223 00000030 00                              	DB	0
   224 00000031 84                              	DB	-124
   225 00000032 84                              	DB	-124
   226 00000033 00                              	DB	0
   227 00000034 00                              	DB	0
   228 00000035 00                              	DB	0
   229 00000036 84                              	DB	-124
   230 00000037 84                              	DB	-124
   231 00000038 00                              	DB	0
   232 00000039 84                              	DB	-124
   233 0000003A 00                              	DB	0
   234 0000003B 84                              	DB	-124
   235 0000003C 84                              	DB	-124
   236 0000003D 84                              	DB	-124
   237 0000003E 84                              	DB	-124
   238 0000003F 84                              	DB	-124
   239                                          [SECTION .text]
   240 000001F7                                 	GLOBAL	_init_palette
   241 000001F7                                 _init_palette:
   242 000001F7 55                              	PUSH	EBP
   243 000001F8 89 E5                           	MOV	EBP,ESP
   244 000001FA 68 [00000010]                   	PUSH	_table_rgb.0
   245 000001FF 6A 0F                           	PUSH	15
   246 00000201 6A 00                           	PUSH	0
   247 00000203 E8 00000002                     	CALL	_set_palette
   248 00000208 C9                              	LEAVE
   249 00000209 C3                              	RET
   250 0000020A                                 	GLOBAL	_set_palette
   251 0000020A                                 _set_palette:
   252 0000020A 55                              	PUSH	EBP
   253 0000020B 89 E5                           	MOV	EBP,ESP
   254 0000020D 57                              	PUSH	EDI
   255 0000020E 56                              	PUSH	ESI
   256 0000020F 53                              	PUSH	EBX
   257 00000210 51                              	PUSH	ECX
   258 00000211 8B 5D 08                        	MOV	EBX,DWORD [8+EBP]
   259 00000214 8B 7D 0C                        	MOV	EDI,DWORD [12+EBP]
   260 00000217 8B 75 10                        	MOV	ESI,DWORD [16+EBP]
   261 0000021A E8 [00000000]                   	CALL	_io_load_eflags
   262 0000021F 89 45 F0                        	MOV	DWORD [-16+EBP],EAX
   263 00000222 E8 [00000000]                   	CALL	_io_cli
   264 00000227 53                              	PUSH	EBX
   265 00000228 68 000003C8                     	PUSH	968
   266 0000022D E8 [00000000]                   	CALL	_io_out8
   267 00000232 39 FB                           	CMP	EBX,EDI
   268 00000234 58                              	POP	EAX
   269 00000235 5A                              	POP	EDX
   270 00000236 7D 48                           	JGE	L13
   271 00000238 29 DF                           	SUB	EDI,EBX
   272 0000023A 89 FB                           	MOV	EBX,EDI
   273 0000023C                                 L11:
   274 0000023C 8A 06                           	MOV	AL,BYTE [ESI]
   275 0000023E C0 E8 02                        	SHR	AL,2
   276 00000241 0F B6 C0                        	MOVZX	EAX,AL
   277 00000244 50                              	PUSH	EAX
   278 00000245 68 000003C9                     	PUSH	969
   279 0000024A E8 [00000000]                   	CALL	_io_out8
   280 0000024F 8A 46 01                        	MOV	AL,BYTE [1+ESI]
   281 00000252 C0 E8 02                        	SHR	AL,2
   282 00000255 0F B6 C0                        	MOVZX	EAX,AL
   283 00000258 50                              	PUSH	EAX
   284 00000259 68 000003C9                     	PUSH	969
   285 0000025E E8 [00000000]                   	CALL	_io_out8
   286 00000263 8A 46 02                        	MOV	AL,BYTE [2+ESI]
   287 00000266 C0 E8 02                        	SHR	AL,2
   288 00000269 83 C6 03                        	ADD	ESI,3
   289 0000026C 0F B6 C0                        	MOVZX	EAX,AL
   290 0000026F 50                              	PUSH	EAX
   291 00000270 68 000003C9                     	PUSH	969
   292 00000275 E8 [00000000]                   	CALL	_io_out8
   293 0000027A 83 C4 18                        	ADD	ESP,24
   294 0000027D 4B                              	DEC	EBX
   295 0000027E 75 BC                           	JNE	L11
   296 00000280                                 L13:
   297 00000280 8B 45 F0                        	MOV	EAX,DWORD [-16+EBP]
   298 00000283 89 45 08                        	MOV	DWORD [8+EBP],EAX
   299 00000286 8D 65 F4                        	LEA	ESP,DWORD [-12+EBP]
   300 00000289 5B                              	POP	EBX
   301 0000028A 5E                              	POP	ESI
   302 0000028B 5F                              	POP	EDI
   303 0000028C 5D                              	POP	EBP
   304 0000028D E9 [00000000]                   	JMP	_io_store_eflags
   305 00000292                                 	GLOBAL	_boxfill8
   306 00000292                                 _boxfill8:
   307 00000292 55                              	PUSH	EBP
   308 00000293 89 E5                           	MOV	EBP,ESP
   309 00000295 57                              	PUSH	EDI
   310 00000296 56                              	PUSH	ESI
   311 00000297 53                              	PUSH	EBX
   312 00000298 57                              	PUSH	EDI
   313 00000299 57                              	PUSH	EDI
   314 0000029A 8A 45 10                        	MOV	AL,BYTE [16+EBP]
   315 0000029D 8B 4D 18                        	MOV	ECX,DWORD [24+EBP]
   316 000002A0 8B 7D 1C                        	MOV	EDI,DWORD [28+EBP]
   317 000002A3 88 45 F3                        	MOV	BYTE [-13+EBP],AL
   318 000002A6 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   319 000002A9 7F 31                           	JG	L26
   320 000002AB 8B 5D 0C                        	MOV	EBX,DWORD [12+EBP]
   321 000002AE 0F AF D9                        	IMUL	EBX,ECX
   322 000002B1                                 L24:
   323 000002B1 8B 55 14                        	MOV	EDX,DWORD [20+EBP]
   324 000002B4 39 FA                           	CMP	EDX,EDI
   325 000002B6 7F 1B                           	JG	L28
   326 000002B8 8B 75 08                        	MOV	ESI,DWORD [8+EBP]
   327 000002BB 01 DE                           	ADD	ESI,EBX
   328 000002BD 01 D6                           	ADD	ESI,EDX
   329 000002BF 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   330 000002C2                                 L23:
   331 000002C2 8B 75 EC                        	MOV	ESI,DWORD [-20+EBP]
   332 000002C5 8A 45 F3                        	MOV	AL,BYTE [-13+EBP]
   333 000002C8 42                              	INC	EDX
   334 000002C9 88 06                           	MOV	BYTE [ESI],AL
   335 000002CB 46                              	INC	ESI
   336 000002CC 89 75 EC                        	MOV	DWORD [-20+EBP],ESI
   337 000002CF 39 FA                           	CMP	EDX,EDI
   338 000002D1 7E EF                           	JLE	L23
   339 000002D3                                 L28:
   340 000002D3 41                              	INC	ECX
   341 000002D4 03 5D 0C                        	ADD	EBX,DWORD [12+EBP]
   342 000002D7 3B 4D 20                        	CMP	ECX,DWORD [32+EBP]
   343 000002DA 7E D5                           	JLE	L24
   344 000002DC                                 L26:
   345 000002DC 5B                              	POP	EBX
   346 000002DD 5E                              	POP	ESI
   347 000002DE 5B                              	POP	EBX
   348 000002DF 5E                              	POP	ESI
   349 000002E0 5F                              	POP	EDI
   350 000002E1 5D                              	POP	EBP
   351 000002E2 C3                              	RET
