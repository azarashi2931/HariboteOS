     1 00000000                                 ; hello-os
     2 00000000                                 ; TAB = 4
     3 00000000                                 
     4 00000000                                 [FORMAT "WCOFF"]                    ; オブジェクトファイルを作るモード
     5 00000000                                 [INSTRSET "i486p"]	    			; 486の命令まで使いたいという記述
     6 00000000                                 [BITS 32]                           ; 32ビットモードの機械語を作らせる
     7 00000000                                 
     8 00000000                                 
     9 00000000                                 ; オブジェクトファイルのための情報
    10 00000000                                 [FILE "naskfunc.nasm"]              ; ソースファイル名の情報
    11 00000000                                         GLOBAL  _io_hlt,_write_mem8 ; このプログラムに含まれる関数名
    12 00000000                                 
    13 00000000                                 ; 以下は実際の関数
    14 00000000                                 
    15                                          [SECTION .text]                     ; オブジェクトファイルではこれを書いてからプログラムを書く
    16 00000000                                 
    17 00000000                                 _io_hlt                             ; void io_hlt(void);
    18 00000000 F4                                  HLT
    19 00000001 C3                                  RET
    20 00000002                                 
    21 00000002                                 _write_mem8:                        ; void write_mem8(int address, int data)
    22 00000002 8B 4C 24 04                         MOV     ECX, [ESP+4]            ; [ESP+4]にaddressが入っているのでECXに読み込む
    23 00000006 8A 44 24 08                         MOV     AL, [ESP+8]             ; [ESP+8]にdataが入っているのでALに読み込む
    24 0000000A 88 01                               MOV     [ECX], AL
    25 0000000C C3                                  RET